(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[717],{2603:function(W,D,e){"use strict";e.d(D,{Z:function(){return p}});var v=e(28991),d=e(67294),Z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},c=Z,i=e(27029),m=function(O,g){return d.createElement(i.Z,(0,v.Z)((0,v.Z)({},O),{},{ref:g,icon:c}))},a=d.forwardRef(m),p=a},29985:function(W,D,e){"use strict";e.d(D,{Z:function(){return p}});var v=e(28991),d=e(67294),Z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M744 62H280c-35.3 0-64 28.7-64 64v768c0 35.3 28.7 64 64 64h464c35.3 0 64-28.7 64-64V126c0-35.3-28.7-64-64-64zm-8 824H288V134h448v752zM472 784a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"mobile",theme:"outlined"},c=Z,i=e(27029),m=function(O,g){return d.createElement(i.Z,(0,v.Z)((0,v.Z)({},O),{},{ref:g,icon:c}))},a=d.forwardRef(m),p=a},16434:function(W,D,e){"use strict";var v=e(9715),d=e(55843),Z=e(57663),c=e(71577),i=e(47673),m=e(4107),a=e(22122),p=e(28991),B=e(55507),O=e(92137),g=e(81253),E=e(28481),n=e(67294),I=e(64893),L=["rules","name","phoneName","fieldProps","captchaTextRender","captchaProps"],G=n.forwardRef(function(_,H){var $=(0,n.useState)(_.countDown||60),t=(0,E.Z)($,2),w=t[0],R=t[1],s=(0,n.useState)(!1),S=(0,E.Z)(s,2),M=S[0],y=S[1],N=(0,n.useState)(),U=(0,E.Z)(N,2),j=U[0],F=U[1],z=_.rules,x=_.name,b=_.phoneName,l=_.fieldProps,Y=_.captchaTextRender,J=Y===void 0?function(u,o){return u?"".concat(o," \u79D2\u540E\u91CD\u65B0\u83B7\u53D6"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"}:Y,A=_.captchaProps,P=(0,g.Z)(_,L),h=function(){var u=(0,O.Z)((0,B.Z)().mark(function o(r){return(0,B.Z)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.prev=0,F(!0),C.next=4,P.onGetCaptcha(r);case 4:F(!1),y(!0),C.next=13;break;case 8:C.prev=8,C.t0=C.catch(0),y(!1),F(!1),console.log(C.t0);case 13:case"end":return C.stop()}},o,null,[[0,8]])}));return function(r){return u.apply(this,arguments)}}();return(0,n.useEffect)(function(){var u=0,o=_.countDown;return M&&(u=window.setInterval(function(){R(function(r){return r<=1?(y(!1),clearInterval(u),o||60):r-1})},1e3)),function(){return clearInterval(u)}},[M]),n.createElement(d.Z.Item,{noStyle:!0,shouldUpdate:!0},function(u){var o=u.getFieldValue,r=u.validateFields;return n.createElement("div",{style:(0,p.Z)((0,p.Z)({},l==null?void 0:l.style),{},{display:"flex",alignItems:"center"}),ref:H},n.createElement(m.Z,(0,a.Z)({},l,{style:{flex:1,transition:"width .3s",marginRight:8}})),n.createElement(c.Z,(0,a.Z)({style:{display:"block"},disabled:M,loading:j},A,{onClick:(0,O.Z)((0,B.Z)().mark(function V(){var C;return(0,B.Z)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(T.prev=0,!b){T.next=9;break}return T.next=4,r([b].flat(1));case 4:return C=o([b].flat(1)),T.next=7,h(C);case 7:T.next=11;break;case 9:return T.next=11,h("");case 11:T.next=16;break;case 13:T.prev=13,T.t0=T.catch(0),console.log(T.t0);case 16:case"end":return T.stop()}},V,null,[[0,13]])}))}),J(M,w)))})}),K=(0,I.G)(G);D.Z=K},5966:function(W,D,e){"use strict";var v=e(22122),d=e(81253),Z=e(67294),c=e(95402),i=["fieldProps","proFieldProps"],m=["fieldProps","proFieldProps"],a="text",p=function(E){var n=E.fieldProps,I=E.proFieldProps,L=(0,d.Z)(E,i);return Z.createElement(c.Z,(0,v.Z)({mode:"edit",valueType:a,fieldProps:n,filedConfig:{valueType:a},proFieldProps:I},L))},B=function(E){var n=E.fieldProps,I=E.proFieldProps,L=(0,d.Z)(E,m);return Z.createElement(c.Z,(0,v.Z)({mode:"edit",valueType:"password",fieldProps:n,proFieldProps:I,filedConfig:{valueType:a}},L))},O=p;O.Password=B,O.displayName="ProFormComponent",D.Z=O},43504:function(W,D,e){"use strict";e.d(D,{U:function(){return E}});var v=e(22122),d=e(84305),Z=e(39559),c=e(28991),i=e(81253),m=e(54787),a=e(67294),p=e(5894),B=e(32384),O=e.n(B),g=["logo","message","contentStyle","title","subTitle","actions","children"];function E(n){var I=n.logo,L=n.message,G=n.contentStyle,K=n.title,_=n.subTitle,H=n.actions,$=n.children,t=(0,i.Z)(n,g),w=(0,m.YB)(),R=t.submitter===!1?!1:(0,c.Z)((0,c.Z)({searchConfig:{submitText:w.getMessage("loginForm.submitText","\u767B\u5F55")},submitButtonProps:{size:"large",style:{width:"100%"}}},t.submitter),{},{render:function(U,j){var F,z,x=j.pop();if((t==null||(F=t.submitter)===null||F===void 0?void 0:F.render)===void 0)return x;if(typeof(t==null||(z=t.submitter)===null||z===void 0?void 0:z.render)=="function"){var b,l;return t==null||(b=t.submitter)===null||b===void 0||(l=b.render)===null||l===void 0?void 0:l.call(b,U,j)}return x}}),s=(0,a.useContext)(Z.ZP.ConfigContext),S=s.getPrefixCls("pro-form-login"),M=function(U){return"".concat(S,"-").concat(U)},y=(0,a.useMemo)(function(){return I?typeof I=="string"?a.createElement("img",{src:I}):I:null},[I]);return a.createElement("div",{className:M("container")},a.createElement("div",{className:M("top")},K||y?a.createElement("div",{className:M("header")},y?a.createElement("span",{className:M("logo")},y):null,K?a.createElement("span",{className:M("title")},K):null):null,_?a.createElement("div",{className:M("desc")},_):null),a.createElement("div",{className:M("main"),style:(0,c.Z)({width:328},G)},a.createElement(p.A,(0,v.Z)({isKeyPressSubmit:!0},t,{submitter:R}),L,$),H?a.createElement("div",{className:M("other")},H):null))}},95101:function(W){W.exports={container:"container___3u4qc",lang:"lang___3VyRW",content:"content___1k5Ro",icon:"icon___14_b2"}},32384:function(){},29552:function(W,D,e){"use strict";e.r(D);var v=e(18106),d=e(63885),Z=e(34792),c=e(48086),i=e(39428),m=e(11849),a=e(3182),p=e(2824),B=e(17462),O=e(76772),g=e(71390),E=e(93387),n=e(70994),I=e(89366),L=e(2603),G=e(29985),K=e(43504),_=e(5966),H=e(16434),$=e(67294),t=e(43581),w=e(95101),R=e.n(w),s=e(85893),S=function(N){var U=N.content;return(0,s.jsx)(O.Z,{style:{marginBottom:24},message:U,type:"error",showIcon:!0})},M=function(){var N=(0,$.useState)("account"),U=(0,p.Z)(N,2),j=U[0],F=U[1],z=(0,t.tT)("@@initialState"),x=z.initialState,b=z.setInitialState,l=(0,t.YB)(),Y=function(){var A=(0,a.Z)((0,i.Z)().mark(function P(){var h,u;return(0,i.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,x==null||(h=x.fetchUserInfo)===null||h===void 0?void 0:h.call(x);case 2:if(u=r.sent,!u){r.next=6;break}return r.next=6,b(function(V){return(0,m.Z)((0,m.Z)({},V),{},{currentUser:u})});case 6:case"end":return r.stop()}},P)}));return function(){return A.apply(this,arguments)}}(),J=function(){var A=(0,a.Z)((0,i.Z)().mark(function P(h){var u,o,r,V;return(0,i.Z)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.prev=0,f.next=3,(0,E.z2)(h);case 3:if(u=f.sent,!(u>0)){f.next=14;break}return o=l.formatMessage({id:"pages.register.success",defaultMessage:"\u6CE8\u518C\u6210\u529F\uFF01"}),c.ZP.success(o),f.next=9,Y();case 9:if(t.m8){f.next=11;break}return f.abrupt("return");case 11:return r=t.m8.location.query,t.m8.push({pathname:"/user/login",query:r}),f.abrupt("return");case 14:f.next=19;break;case 16:f.prev=16,f.t0=f.catch(0),V=l.formatMessage({id:"pages.login.failure",defaultMessage:"\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"});case 19:case"end":return f.stop()}},P,null,[[0,16]])}));return function(h){return A.apply(this,arguments)}}();return(0,s.jsxs)("div",{className:R().container,children:[(0,s.jsx)("div",{className:R().lang,"data-lang":!0,children:t.pD&&(0,s.jsx)(t.pD,{})}),(0,s.jsx)("div",{className:R().content,children:(0,s.jsxs)(K.U,{submitter:{searchConfig:{submitText:"\u6CE8\u518C"}},logo:(0,s.jsx)("img",{alt:"logo",src:"/logo.svg"}),title:"Ant Design",subTitle:l.formatMessage({id:"pages.layouts.userLayout.title"}),initialValues:{autoLogin:!0},onFinish:function(){var A=(0,a.Z)((0,i.Z)().mark(function P(h){return(0,i.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,J(h);case 2:case"end":return o.stop()}},P)}));return function(P){return A.apply(this,arguments)}}(),children:[(0,s.jsx)(d.Z,{activeKey:j,onChange:F,children:(0,s.jsx)(d.Z.TabPane,{tab:l.formatMessage({id:"pages.login.accountRegister.tab",defaultMessage:"\u8D26\u6237\u5BC6\u7801\u6CE8\u518C"})},"account")}),status==="error"&&loginType==="account"&&(0,s.jsx)(S,{content:l.formatMessage({id:"pages.login.accountRegister.errorMessage",defaultMessage:"\u8D26\u6237\u6216\u5BC6\u7801\u9519\u8BEF(admin/ant.design)"})}),j==="account"&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(_.Z,{name:"userAccount",fieldProps:{size:"large",prefix:(0,s.jsx)(I.Z,{className:R().prefixIcon})},placeholder:l.formatMessage({id:"pages.register.username.placeholder",defaultMessage:"\u7528\u6237\u540D"}),rules:[{required:!0,message:(0,s.jsx)(t._H,{id:"pages.register.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),(0,s.jsx)(_.Z.Password,{name:"userPassword",fieldProps:{size:"large",prefix:(0,s.jsx)(L.Z,{className:R().prefixIcon})},placeholder:l.formatMessage({id:"pages.register.password.placeholder",defaultMessage:"\u5BC6\u7801"}),rules:[{required:!0,message:(0,s.jsx)(t._H,{id:"pages.register.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})},{min:8,type:"string",message:"\u957F\u5EA6\u4E0D\u80FD\u5C0F\u4E8E8"}]}),(0,s.jsx)(_.Z.Password,{name:"checkPassword",fieldProps:{size:"large",prefix:(0,s.jsx)(L.Z,{className:R().prefixIcon})},placeholder:l.formatMessage({id:"pages.register.checkPassword.placeholder",defaultMessage:"\u91CD\u590D\u5BC6\u7801"}),rules:[{required:!0,message:(0,s.jsx)(t._H,{id:"pages.login.checkPassword.required",defaultMessage:"\u8BF7\u91CD\u590D\u5BC6\u7801\uFF01"})},{min:8,type:"string",message:"\u957F\u5EA6\u4E0D\u80FD\u5C0F\u4E8E8"}]}),(0,s.jsx)(_.Z.Password,{name:"planetCode",fieldProps:{size:"large",prefix:(0,s.jsx)(L.Z,{className:R().prefixIcon})},placeholder:l.formatMessage({id:"pages.register.planetCode.placeholder",defaultMessage:"\u661F\u7403\u7F16\u53F7"}),rules:[{required:!0,message:(0,s.jsx)(t._H,{id:"pages.register.planetCode.required",defaultMessage:"\u8BF7\u8F93\u5165\u661F\u7403\u7F16\u53F7\uFF01"})},{min:5,type:"string",message:"\u957F\u5EA6\u4E0D\u80FD\u5927\u4E8E5"}]})]}),status==="error"&&loginType==="mobile"&&(0,s.jsx)(S,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF"}),j==="mobile"&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(_.Z,{fieldProps:{size:"large",prefix:(0,s.jsx)(G.Z,{className:R().prefixIcon})},name:"mobile",placeholder:l.formatMessage({id:"pages.login.phoneNumber.placeholder",defaultMessage:"\u624B\u673A\u53F7"}),rules:[{required:!0,message:(0,s.jsx)(t._H,{id:"pages.login.phoneNumber.required",defaultMessage:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"})},{pattern:/^1\d{10}$/,message:(0,s.jsx)(t._H,{id:"pages.login.phoneNumber.invalid",defaultMessage:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"})}]}),(0,s.jsx)(H.Z,{fieldProps:{size:"large",prefix:(0,s.jsx)(L.Z,{className:R().prefixIcon})},captchaProps:{size:"large"},placeholder:l.formatMessage({id:"pages.login.captcha.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}),captchaTextRender:function(P,h){return P?"".concat(h," ").concat(l.formatMessage({id:"pages.getCaptchaSecondText",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})):l.formatMessage({id:"pages.login.phoneLogin.getVerificationCode",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})},name:"captcha",rules:[{required:!0,message:(0,s.jsx)(t._H,{id:"pages.login.captcha.required",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"})}],onGetCaptcha:function(){var A=(0,a.Z)((0,i.Z)().mark(function P(h){var u;return(0,i.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,n.m)({phone:h});case 2:if(u=r.sent,u!==!1){r.next=5;break}return r.abrupt("return");case 5:c.ZP.success("\u83B7\u53D6\u9A8C\u8BC1\u7801\u6210\u529F\uFF01\u9A8C\u8BC1\u7801\u4E3A\uFF1A1234");case 6:case"end":return r.stop()}},P)}));return function(P){return A.apply(this,arguments)}}()})]}),(0,s.jsx)("div",{style:{marginBottom:24},children:(0,s.jsx)("a",{style:{float:"right"},children:(0,s.jsx)(t._H,{id:"pages.login.forgotPassword",defaultMessage:"\u5FD8\u8BB0\u5BC6\u7801"})})})]})}),(0,s.jsx)(g.Z,{})]})};D.default=M},70994:function(W,D,e){"use strict";e.d(D,{m:function(){return i}});var v=e(39428),d=e(11849),Z=e(3182),c=e(43581);function i(a,p){return m.apply(this,arguments)}function m(){return m=(0,Z.Z)((0,v.Z)().mark(function a(p,B){return(0,v.Z)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,c.WY)("/api/login/captcha",(0,d.Z)({method:"GET",params:(0,d.Z)({},p)},B||{})));case 1:case"end":return g.stop()}},a)})),m.apply(this,arguments)}}}]);
